<!DOCTYPE html>
<html>
<head>
    <title>Configuration</title>
    <link rel="stylesheet" href="/static/config.css">
</head>
<body>

<header>
    <div class="header-inner">
        <h1>Slack Bot Configuration</h1>

        <div class="nav-links">
            <a href="/" class="nav-item">Dashboard</a>
            <a href="/config" class="nav-item active">Configuration</a>
        </div>
    </div>
</header>


<main class="container">
    <h2>Bot Configuration</h2>
    <hr>

    <form method="post" action="/config">

        <label>Bot Token</label><br>
        <input type="password" id="bot_token" name="bot_token" value="{{ bot_token }}" style="width:100%; padding:8px;">
        <label><input type="checkbox" onclick="toggleVisibility('bot_token')"> Show bot token</label>
        <br>

        <label>App Token</label><br>
        <input type="password" id="app_token" name="app_token" value="{{ app_token }}" style="width:100%; padding:8px;">
        <label><input type="checkbox" onclick="toggleVisibility('app_token')"> Show app token</label>
        <br>

        <label>Api Key</label><br>
        <input type="password" id="api_key" name="api_key" value="{{ api_key }}" style="width:100%; padding:8px;">
        <label><input type="checkbox" onclick="toggleVisibility('api_key')"> Show api key</label>
        <br>

        <label>Local Host</label><br>
        <input type="text" name="local_host" value="{{ local_host }}" style="width:100%; padding:8px;"><br>

        <label>Allowed Group Channels Ids</label><br>
        <input type="text" name="allowed_channels" value="{{ allowed_channels }}" style="width:100%; padding:8px;"><br>

        <label>Model</label><br>
        <input type="text" name="model" value="{{ model }}" style="width:100%; padding:8px;"><br>

        <label>System Message</label><br>
        <textarea name="system_message" rows="8" style="width:100%; padding:10px;">{{ system_message }}</textarea>

        <label>Short Memory (Number of messages)</label><br>
        <input type="number" name="short_memory" value="{{ short_memory }}" style="width:100%; padding:8px;"><br>
        <br>

        <label>Serper Web Search Key </label><br>
        <input type="password" id="web_key" name="web_key" value="{{ web_key }}" style="width:100%; padding:8px;">
        <label><input type="checkbox" onclick="toggleVisibility('web_key')"> Show web key</label>
        <br>

        <hr>
        <h3>ComfyUI Image Settings</h3>
        
        <label>ComfyUI API URL (e.g., http://127.0.0.1:8188)</label><br>
        <input type="text" name="comfy_api" value="{{ comfy_api }}" style="width:100%; padding:8px;"><br>

        <label>Image Output Path (Local Folder)</label><br>
        <input type="text" name="comfy_image_path" value="{{ comfy_image_path }}" style="width:100%; padding:8px;"><br>

        <div style="display: flex; gap: 20px;">
            <div style="flex: 1;">
                <label>Width</label><br>
                <input type="number" name="comfy_image_width" value="{{ comfy_image_width }}" style="width:100%; padding:8px;">
            </div>
            <div style="flex: 1;">
                <label>Height</label><br>
                <input type="number" name="comfy_image_height" value="{{ comfy_image_height }}" style="width:100%; padding:8px;">
            </div>
            <div style="flex: 1;">
                <label>Steps</label><br>
                <input type="number" name="comfy_steps" value="{{ comfy_steps }}" style="width:100%; padding:8px;">
            </div>
        </div>
        <br>

        <button type="submit">Save Configuration</button>
        <p class="red-p">After you press the save button restart the whole program for the changes to apply.</p>

    </form>
</main>

<script>
    function toggleVisibility(id) {
        const input = document.getElementById(id);
        input.type = input.type === "password" ? "text" : "password";
}
</script>

</body>
</html>
